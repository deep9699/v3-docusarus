#!/bin/bash

# Stash staged changes
git stash -q --keep-index

# Run Prettier on staged files
npm run prettier:check --silent

# Capture the exit code of the Prettier check
PRETTIER_EXIT_CODE=$?

# Apply stashed changes back
git stash pop -q

# If Prettier check fails, prevent the commit
if [ $PRETTIER_EXIT_CODE -ne 0 ]; then
    echo "Prettier check failed. Please fix formatting issues before committing."
    exit 1
fi
